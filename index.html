<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>LessThanZer0 Destiny 2 OAuth Generator</title>
        <link href="//twitchapps.com/bootstrap/css/cosmo.css" rel="stylesheet" />
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" language="javascript">
            $(document).ready(function() {
                var oauthHash = location.hash.substr(1);
                var accessToken = oauthHash.substr(oauthHash.indexOf('access_token=')).split('&')[0].split('=')[1];

                if (accessToken) {
                    $("#infoTable").hide();
                    $("#passwordTable").show();
		    $("#oauthpass").val('/set irc.server.twitch.password \"oauth:' + encodeURIComponent(accessToken) + '\"');
	            $("#oauthtoken").val('/set plugins.var.python.twitch.token '+ encodeURIComponent(accessToken));
                    $("#clientid").val('/set plugins.var.python.twitch.client_id awtv6n371jb7uayyc4jaljochyjbfxs');
                }
            });
        </script>
        <style>
            #tmiPasswordField {
                cursor: default !important;
            }
            #tmiExample {
                display:block;
            }
        </style>
    </head>
    <body style="padding-top: 20px;">
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span12">
                    <div style="width:600px;margin:auto;">
                        <table class="table table-bordered table-striped" id="passwordTable" style="display:none;">
                            <tr>
                                <th>Destiny 2 OAuth Generator</th>
                            </tr>
                            <tr>
                                <td>
                                    <div style="text-align:center;padding-bottom:10px;">
                                        <p>
                                            Below is your OAuth token
                                        </p>
                                        <input class="span9" type="text" id="oauthpass" onClick="this.select();" readonly="readonly">
					<input class="span9" type="text" id="oauthtoken" onClick="this.select();" readonly="readonly">
                                        <input class="span9" type="text" id="clientid" onClick="this.select();" readonly="readonly">
                                        <br />
                                        <br />
                                    </div>
                                </td>
                            </tr>
                        </table>
                        <table class="table table-bordered table-striped" id="infoTable">
                            <tr>
                                <th>weechat-twitch.py OAuth Generator</th>
                            </tr>
                            <tr>
                                <td>
                                    <div style="text-align:center;padding-bottom:10px;">
                                        <a href="https://www.bungie.net/en/OAuth/Authorize?client_id={42433}&response_type=code" class="btn btn-large btn-primary">Connect</a>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
				</div>
            </div>
        </div>
    </body>
</html>
